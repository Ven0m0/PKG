# Patchset context

wine commit: [wine-a82d717c](https://gitlab.winehq.org/wine/wine/-/tree/a82d717ce63965bec9a06eb1452b3d09b78a6021)

staging commit: [staging-52bc59da](https://gitlab.winehq.org/wine/wine-staging/-/tree/52bc59da118fa2b9584b5e54c416bbb055306e00)

Staging exclude flags: `-W winedevice-Default_Drivers -W dsound-EAX -W mountmgr-DosDevices`

# Environment variables

An autogenerated list of some added environment variables.


Also see the releases page, there may be more relevant details about them there.
This is by no means comprehensive, I'm too lazy for that.

## ALSA_EXTRA_PAD

Patch: [0005-alsa-pulse-mmdevapi-Support-custom-period-and-buffer-sizes.patch](0012-audio/0005-alsa-pulse-mmdevapi-Support-custom-period-and-buffer-sizes.patch)

### Commit message

```
alsa,pulse,mmdevapi: Support custom period and buffer sizes, and respect PulseAudio settings.
Relevant environment variables are:
ALSA_EXTRA_PAD (units: usecs*10; default is 40000, can be set to 0, adds extra padding)
STAGING_AUDIO_PERIOD (units: usecs*10)
STAGING_AUDIO_DURATION (units: usecs*10)
Also, silence pcm.c underrun errors.
```

### Type

`boolean`

## WINEDMO

Patch: [winedmo-Add-envvar-option-to-enable-disable.patch](9000-misc-additions/winedmo-Add-envvar-option-to-enable-disable.patch)

### Commit message

```
winedmo: Add envvar option to enable/disable.
```

## WINE_CUSTOM_FPS

Patch: [winex11-Custom-frame-limiter-for-OpenGL.patch](9000-misc-additions/winex11-Custom-frame-limiter-for-OpenGL.patch)

### Commit message

```
winex11: Custom frame limiter for OpenGL
```

### Type

`boolean`

## WINE_CUSTOM_FPS_BUSYTHRESH

Patch: [winex11-Custom-frame-limiter-for-OpenGL.patch](9000-misc-additions/winex11-Custom-frame-limiter-for-OpenGL.patch)

### Type

`boolean`

## WINE_DISABLE_IME

Patch: [disable-ime-envvar.patch](9000-misc-additions/disable-ime-envvar.patch)

### Type

`boolean`

## WINE_DISABLE_KDE_HACKS

Patch: [0001-HACK-winex11-Skip-delay-on-KDE-if-wm_state-is-unchan.patch](0009-windowing-system-integration/0001-misc/0001-HACK-winex11-Skip-delay-on-KDE-if-wm_state-is-unchan.patch)

### Commit message

```
HACK: winex11: Skip delay on KDE if wm_state is unchanged
Attempt at fixing an edge-case where a black window is created upon alt-tab on KDE when the window state is unchanged.
Can be disabled with WINE_DISABLE_KDE_HACKS=1.
```

## WINE_DISABLE_RAWINPUT

Patch: [force-disable-rawinput-envvar.patch](9000-misc-additions/force-disable-rawinput-envvar.patch)

### Commit message

```
add an env var to force disable rawinput.
```

### Type

`numeric`

## WINE_DISABLE_TSC

Patch: [9300-configure-ntdll-Check-for-perf-struct-attributes.patch](0013-server-optimization/0003-qpc/9300-configure-ntdll-Check-for-perf-struct-attributes.patch)

### Commit message

```
configure, ntdll: Check for perf struct attributes.
```

### Description

allow disabling rdtscp if Wine is built with old Linux kernels (e.g. WineBuilder Ubuntu 20.04)

## WINE_ENABLE_ABS_TABLET_HACK

Patch: [cursor-clip-hack.patch](9000-misc-additions/cursor-clip-hack.patch)

### Commit message

```
cursor clip hack
```

### Type

`numeric`

## WINE_ENABLE_OSU_FOCUS_FIX

Patch: [0002-HACK-win32u-keep-osu-from-taking-focus-when-unfocuse.patch](0009-windowing-system-integration/0001-misc/0002-HACK-win32u-keep-osu-from-taking-focus-when-unfocuse.patch)

### Commit message

```
HACK: win32u: keep osu! from taking focus when unfocused on certain WMs
Depends on Proton's WM detection. KDE seems to not be affected by this.
Can also be enabled on whatever DE/WM with WINE_ENABLE_OSU_FOCUS_FIX=1.
```

## WINE_HOST_XDG_CACHE_HOME

Patch: [ps0341-appwiz.cpl-Try-getting-the-cache-directory-from-an.patch](0013-server-optimization/0001-misc/ps0341-appwiz.cpl-Try-getting-the-cache-directory-from-an.patch)

### Commit message

```
appwiz.cpl: Try getting the cache directory from an environment variable first.
```

## WINE_INSTALL_ROOT_DEVICES

Patch: [wineboot-Skip-root-device-installation-if-WINE_INSTA.patch](9000-misc-additions/wineboot-Skip-root-device-installation-if-WINE_INSTA.patch)

### Commit message

```
wineboot: Skip root device installation if WINE_INSTALL_ROOT_DEVICES isn't in the environment.
osu! doesn't need any of them.
```

## WINE_LARGE_ADDRESS_AWARE

Patch: [ps0427-ntdll-loader-add-support-for-overriding-IMAGE_FILE_L.patch](0013-server-optimization/0001-misc/ps0427-ntdll-loader-add-support-for-overriding-IMAGE_FILE_L.patch)

### Commit message

```
ntdll/loader: add support for overriding IMAGE_FILE_LARGE_ADDRESS_AWARE
```

### Type

`numeric`

## WINE_PULSE_MEMLOCK

Patch: [0003-winepulse-Try-memlocking-the-audio-buffer.patch](0012-audio/0003-winepulse-Try-memlocking-the-audio-buffer.patch)

### Commit message

```
winepulse: Try memlocking the audio buffer.
But allow disabling it with WINE_PULSE_MEMLOCK=0.
```

### Type

`numeric`

## WINE_SHELL32_HACKS

Patch: [HACK-shell32-replace-osu-s-explorer.exe-calls-with-t.patch](9000-misc-additions/HACK-shell32-replace-osu-s-explorer.exe-calls-with-t.patch)

### Commit message

```
HACK: shell32: Strip hardcoded explorer/notepad prefix from osu!'s shell open calls.
This allows osu! to open the screenshot folder by clicking
the popup ingame, when WINE_BLOCK_GET_VERSION=1 is used.
That's under the assumption that the Folder\\shell\\open\\command
registry key is set up correctly with xdg-open and all that
machinery that osu-winello sets up automatically.
v2: Added replacement for notepad.exe. Allows opening .osu files from
the editor given the registry association is in place.
Example registry file:
Windows Registry Editor Version 5.00
[HKEY_CLASSES_ROOT\.osu]
@="txtfile"
[HKEY_CLASSES_ROOT\folder\shell\open\command]
@="wscript.exe \"Z:\\\\home\\\\username\\\\.local\\\\share\\\\osuconfig\\\\folderfixosu.vbs\" \"%1\""
[HKEY_CLASSES_ROOT\txtfile\shell\open\command]
@="wscript.exe \"Z:\\\\home\\\\username\\\\.local\\\\share\\\\osuconfig\\\\folderfixosu.vbs\" \"%1\""
v3: Allow force-enabling the hacks outside of osu! with the env var WINE_SHELL32_HACKS=1
```

## WINE_STATIC_CPUFREQ

Patch: [static-cpufreq-envvar.patch](9000-misc-additions/static-cpufreq-envvar.patch)

## WINE_WAYLAND_DISPLAY_INDEX

Patch: [add-WINE_WAYLAND_DISPLAY_INDEX.patch](9000-misc-additions/add-WINE_WAYLAND_DISPLAY_INDEX.patch)

### Commit message

```
add WINE_WAYLAND_DISPLAY_INDEX
```

### Type

`numeric`

## vblank_mode

Patch: [0019-winex11-Force-disable-glXWaitForSbcOML-AMD-on-Waylan.patch](0009-windowing-system-integration/0001-misc/0019-winex11-Force-disable-glXWaitForSbcOML-AMD-on-Waylan.patch)

### Commit message

```
winex11: Force disable glXWaitForSbcOML (AMD) on Wayland to circumvent Xwayland locking FPS to the monitor's refresh rate.
It will prevent ingame vsync from working properly, but the environment variable
vblank_mode != 0 can override-disable this behavior.
```

### Type

`boolean`

